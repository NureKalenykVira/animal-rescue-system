<section class="admin-section">
  <h2>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</h2>

<section class="filter-controls">
  <label>
    ID:
    <input type="number" [(ngModel)]="filters.id" (change)="applyFilters()" />
  </label>

  <label>
    –†–æ–ª—å:
    <select [(ngModel)]="filters.role" (change)="applyFilters()">
      <option value="">–£—Å—ñ</option>
      <option [value]="0">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á</option>
      <option [value]="10">–í–µ—Ç–µ—Ä–∏–Ω–∞—Ä</option>
      <option [value]="11">–í–æ–ª–æ–Ω—Ç–µ—Ä</option>
      <option [value]="100">–õ–æ–∫–∞–ª—å–Ω–∏–π –∞–¥–º—ñ–Ω</option>
      <option [value]="999">–ì–ª–æ–±–∞–ª—å–Ω–∏–π –∞–¥–º—ñ–Ω</option>
    </select>
  </label>

  <label>
    MFA:
    <select [(ngModel)]="filters.hasMfa" (change)="applyFilters()">
      <option value="">–£—Å—ñ</option>
      <option [value]="'true'">–¢–∞–∫</option>
      <option [value]="'false'">–ù—ñ</option>
    </select>
  </label>

  <label>
    –°–æ—Ä—Ç—É–≤–∞—Ç–∏ –∑–∞:
    <select [(ngModel)]="filters.orderBy" (change)="applyFilters()">
      <option value="id">ID</option>
      <option value="first_name">–Ü–º‚Äô—è</option>
      <option value="email">Email</option>
    </select>
  </label>

  <label>
    –ù–∞–ø—Ä—è–º–æ–∫:
    <select [(ngModel)]="filters.order" (change)="applyFilters()">
      <option value="asc">–ó—Ä–æ—Å—Ç–∞–Ω–Ω—è–º</option>
      <option value="desc">–°–ø–∞–¥–∞–Ω–Ω—è–º</option>
    </select>
  </label>

  <button class="green-btn" (click)="resetFilters()">–°–∫–∏–Ω—É—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</button>
</section>

<table class="admin-table" *ngIf="users.length > 0">
<thead>
  <tr>
    <th>ID</th>
    <th>–Ü–º‚Äô—è</th>
    <th>–ü—Ä—ñ–∑–≤–∏—â–µ</th>
    <th>Email</th>
    <th>–†–æ–ª—å</th>
    <th>Telegram</th>
    <th>Viber</th>
    <th>WhatsApp</th>
    <th>MFA</th>
    <th>–î—ñ—ó</th>
  </tr>
</thead>
<tbody>
  <tr *ngFor="let user of users">
    <td>{{ user.id }}</td>
    <td><input [(ngModel)]="user.first_name" /></td>
    <td><input [(ngModel)]="user.last_name" /></td>
    <td><input [(ngModel)]="user.email" /></td>
    <td>
      <select [(ngModel)]="user.role">
        <option [value]="0">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á</option>
        <option [value]="10">–í–µ—Ç–µ—Ä–∏–Ω–∞—Ä</option>
        <option [value]="11">–í–æ–ª–æ–Ω—Ç–µ—Ä</option>
        <option [value]="100">–õ–æ–∫–∞–ª—å–Ω–∏–π –∞–¥–º—ñ–Ω</option>
        <option [value]="999">–ì–ª–æ–±–∞–ª—å–Ω–∏–π –∞–¥–º—ñ–Ω</option>
      </select>
    </td>
    <td><input [(ngModel)]="user.telegram_username" /></td>
    <td><input [(ngModel)]="user.viber_phone" /></td>
    <td><input [(ngModel)]="user.whatsapp_phone" /></td>
    <td class="center">
      <input type="checkbox" [(ngModel)]="user.mfa_enabled" />
    </td>
    <td class="actions-cell">
      <button class="btn-save" (click)="saveUser(user)">üíæ</button>
      <button class="btn-delete" (click)="openDeleteModal(user)">üóë</button>
    </td>
  </tr>
</tbody>
</table>

  <p *ngIf="users.length === 0">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</p>
</section>

<!-- –ú–æ–¥–∞–ª—å–Ω–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è -->
<div class="modal-overlay" *ngIf="userToDelete">
  <div class="modal">
    <h3>–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—è</h3>
    <p>–í–∏ —Å–ø—Ä–∞–≤–¥—ñ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ {{ userToDelete.first_name }} {{ userToDelete.last_name }}?</p>
    <div class="modal-buttons">
      <button (click)="confirmDelete()">–¢–∞–∫, –≤–∏–¥–∞–ª–∏—Ç–∏</button>
      <button (click)="cancelDelete()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
    </div>
  </div>
</div>
