<section class="admin-section">
  <h2>–ó–±–æ—Ä–∏</h2>

  <table class="admin-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>–ù–∞–∑–≤–∞</th>
        <th>–û–ø–∏—Å</th>
        <th>–ü–æ—Ç—Ä—ñ–±–Ω–æ</th>
        <th>–ó—ñ–±—Ä–∞–Ω–æ</th>
        <th>–°—Ç–≤–æ—Ä–µ–Ω–æ</th>
        <th>–ó–∞–≤–µ—Ä—à–µ–Ω–æ</th>
        <th>–î–æ–Ω–∞—Ç–∏</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let g of goals">
        <td>{{ g.id }}</td>
        <td>{{ g.name }}</td>
        <td>{{ g.description }}</td>
        <td>{{ g.need_amount }} –≥—Ä–Ω</td>
        <td>{{ g.got_amount }} –≥—Ä–Ω</td>
        <td>{{ g.created_at }}</td>
        <td>{{ g.ended_at || '‚Äî' }}</td>
        <td>  <button class="icon-button" (click)="viewDonations(g)">üîç</button>  </td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="goals.length === 0">–ó–±–æ—Ä—ñ–≤ –∑–Ω–∞–π–¥–µ–Ω–æ.</p>

  <button class="floating-add-btn" (click)="openAddModal()" title="–î–æ–¥–∞—Ç–∏ —Ü—ñ–ª—å">+</button>
</section>

<div class="modal-overlay" *ngIf="isAddModalOpen">
  <div class="modal">
    <h3>–î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π –∑–±—ñ—Ä</h3>

    <label>–ù–∞–∑–≤–∞:</label>
    <input [(ngModel)]="newGoal.name" />

    <label>–û–ø–∏—Å:</label>
    <textarea [(ngModel)]="newGoal.description"></textarea>

    <label>–ü–æ—Ç—Ä—ñ–±–Ω–∞ —Å—É–º–∞ (–≥—Ä–Ω):</label>
    <input type="number" [(ngModel)]="newGoal.need_amount" />

    <div class="modal-buttons">
      <button (click)="createGoal()">–î–æ–¥–∞—Ç–∏</button>
      <button (click)="cancelAdd()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
    </div>
  </div>
</div>

<div class="modal-overlay" *ngIf="isDonationsModalOpen">
  <div class="modal large">
    <h3>–î–æ–Ω–∞—Ç–∏: "{{ selectedGoalName }}"</h3>

    <table class="admin-table" *ngIf="selectedGoalDonations.length > 0">
      <thead>
        <tr>
          <th>ID</th>
          <th>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á</th>
          <th>–°—É–º–∞</th>
          <th>–î–∞—Ç–∞</th>
          <th>–ö–æ–º–µ–Ω—Ç–∞—Ä</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let d of selectedGoalDonations">
          <td>{{ d.id }}</td>
          <td>{{ d.user?.first_name }} {{ d.user?.last_name }}</td>
          <td>{{ d.amount }} –≥—Ä–Ω</td>
          <td>{{ d.date }}</td>
          <td>{{ d.comment || '‚Äî' }}</td>
        </tr>
      </tbody>
    </table>

    <p *ngIf="selectedGoalDonations.length === 0">–î–æ–Ω–∞—Ç—ñ–≤ –¥–æ —Ü—å–æ–≥–æ –∑–±–æ—Ä—É —â–µ –Ω–µ –Ω–∞–¥—Ö–æ–¥–∏–ª–æ.</p>

    <div class="modal-buttons">
      <button (click)="closeDonationsModal()">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
  </div>
</div>
