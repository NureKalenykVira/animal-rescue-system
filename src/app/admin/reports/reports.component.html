<section class="admin-section">
  <h2>–ó–≤—ñ—Ç–∏ –ø—Ä–æ —Ç–≤–∞—Ä–∏–Ω</h2>

  <div class="filter-controls">
    <div class="filter-fields">
      <label>
        ID:
        <input [(ngModel)]="filters.id" (change)="applyFilters()"/>
      </label>
      <label>
        ID —Ç–≤–∞—Ä–∏–Ω–∏:
        <input [(ngModel)]="filters.animalId" (change)="applyFilters()"/>
      </label>
      <label>
        ID –∞–≤—Ç–æ—Ä–∞:
        <input [(ngModel)]="filters.reportedById" (change)="applyFilters()"/>
      </label>
      <label>
        ID –≤–∏–∫–æ–Ω–∞–≤—Ü—è:
        <input [(ngModel)]="filters.assignedToId" (change)="applyFilters()"/>
      </label>
      <label>
        –°–æ—Ä—Ç—É–≤–∞—Ç–∏ –∑–∞:
        <select [(ngModel)]="filters.orderBy" (change)="applyFilters()">
          <option value="id">ID</option>
          <option value="created_at">–°—Ç–≤–æ—Ä–µ–Ω–Ω—è</option>
        </select>
      </label>
      <label>
        –ù–∞–ø—Ä—è–º–æ–∫:
        <select [(ngModel)]="filters.order" (change)="applyFilters()">
          <option value="asc">–ó—Ä–æ—Å—Ç–∞–Ω–Ω—è–º</option>
          <option value="desc">–°–ø–∞–¥–∞–Ω–Ω—è–º</option>
        </select>
      </label>
    </div>
    <button class="green-btn" (click)="resetFilters()">–°–∫–∏–Ω—É—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</button>
  </div>

  <table class="admin-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>–§–æ—Ç–æ</th>
        <th>–¢–≤–∞—Ä–∏–Ω–∞</th>
        <th>–õ–æ–∫–∞—Ü—ñ—è</th>
        <th>–ê–≤—Ç–æ—Ä</th>
        <th>–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–æ</th>
        <th>–ü—Ä–∏–º—ñ—Ç–∫–∞</th>
        <th>–°—Ç–≤–æ—Ä–µ–Ω–æ</th>
        <th>–î—ñ—ó</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of reports">
        <td>{{ r.id }}</td>
        <td>
          <img *ngIf="r.animal?.media?.result?.[0]?.url" [src]="r.animal.media.result[0].url" alt="" />
        </td>
        <td>{{ r.animal?.name }}</td>
        <td>{{ r.location?.name || r.animal?.current_location?.name }}</td>
        <td>{{ getFullName(r.reported_by) }}</td>
        <td>
          <select [(ngModel)]="r.assigned_to" [ngModelOptions]="{standalone: true}">
            <option [ngValue]="null">–ù–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–æ</option>
            <option *ngFor="let v of volunteers" [ngValue]="v">
              {{ v.first_name }} {{ v.last_name }}
            </option>
          </select>
        </td>
        <td>
          <input [(ngModel)]="r.notes" placeholder="–ü—Ä–∏–º—ñ—Ç–∫–∞" />
        </td>
        <td>{{ r.created_at * 1000 | date:'short' }}</td>
        <td class="actions-cell">
          <button class="btn-save" (click)="saveReport(r)">üíæ</button>
          <button class="btn-delete" (click)="openDeleteModal(r)">üóë</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="modal-overlay" *ngIf="reportToDelete">
    <div class="modal">
      <h3>–í–∏–¥–∞–ª–∏—Ç–∏ –∑–≤—ñ—Ç #{{ reportToDelete.id }}?</h3>
      <div class="modal-buttons">
        <button (click)="confirmDelete()">–í–∏–¥–∞–ª–∏—Ç–∏</button>
        <button (click)="cancelDelete()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
      </div>
    </div>
  </div>
</section>
